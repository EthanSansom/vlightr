<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Conditionally format a vector by location — templight • vlightr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Conditionally format a vector by location — templight"><meta name="description" content="templight() creates a vector with a conditional format()
and print() method. The function takes an input vector .x, a vector
of locations .at, and a formatter function .f. When the result of
templight(.x, .at, .f) is printed, elements of .x at indices specified
by .at are transformed by .f before they are printed.
.at and .f may be equal length lists of indexes and functions. Elements
of .x at locations .at[[i]] are transformed using .f[[i]]. Conditional
formats are applied to the highlighted vector in the order that they are
applied to .at and .f.
templight_mult() and templight_case() allow these pairs of locations and
functions to be supplied as two-sided formulas .at ~ .f using dplyr::case_when()
style syntax.
tl() and templight() are synonyms, as are tl_mult() and
templight_mult(), tl_case() and templight_case()."><meta property="og:description" content="templight() creates a vector with a conditional format()
and print() method. The function takes an input vector .x, a vector
of locations .at, and a formatter function .f. When the result of
templight(.x, .at, .f) is printed, elements of .x at indices specified
by .at are transformed by .f before they are printed.
.at and .f may be equal length lists of indexes and functions. Elements
of .x at locations .at[[i]] are transformed using .f[[i]]. Conditional
formats are applied to the highlighted vector in the order that they are
applied to .at and .f.
templight_mult() and templight_case() allow these pairs of locations and
functions to be supplied as two-sided formulas .at ~ .f using dplyr::case_when()
style syntax.
tl() and templight() are synonyms, as are tl_mult() and
templight_mult(), tl_case() and templight_case()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vlightr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/vlightr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EthanSansom/vlightr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Conditionally format a vector by location</h1>
      <small class="dont-index">Source: <a href="https://github.com/EthanSansom/vlightr/blob/main/R/templight.R" class="external-link"><code>R/templight.R</code></a></small>
      <div class="d-none name"><code>templight.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>templight()</code> creates a vector with a conditional <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code>
and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method. The function takes an input vector <code>.x</code>, a vector
of locations <code>.at</code>, and a formatter function <code>.f</code>. When the result of
<code>templight(.x, .at, .f)</code> is printed, elements of <code>.x</code> at indices specified
by <code>.at</code> are transformed by <code>.f</code> before they are printed.</p>
<p><code>.at</code> and <code>.f</code> may be equal length lists of indexes and functions. Elements
of <code>.x</code> at locations <code>.at[[i]]</code> are transformed using <code>.f[[i]]</code>. Conditional
formats are applied to the highlighted vector in the order that they are
applied to <code>.at</code> and <code>.f</code>.</p>
<p><code>templight_mult()</code> and <code>templight_case()</code> allow these pairs of locations and
functions to be supplied as two-sided formulas <code>.at ~ .f</code> using <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">dplyr::case_when()</a></code>
style syntax.</p>
<p><code>tl()</code> and <code>templight()</code> are synonyms, as are <code>tl_mult()</code> and
<code>templight_mult()</code>, <code>tl_case()</code> and <code>templight_case()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">templight</span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_formatter"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tl</span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_formatter"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">templight_mult</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tl_mult</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">templight_case</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tl_case</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--x">.x<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p><code>[vector]</code></p>
<p>A vector to highlight. Conceptually, a vector is a collection of objects of
size 1.</p>
<p><code>.x</code> is considered a vector if:</p><ul><li><p><code>.x</code> is not a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></p></li>
<li><p><code>.x</code> is not a bare <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></p></li>
<li><p><code>.x</code> is otherwise a vector, as defined by <code><a href="https://vctrs.r-lib.org/reference/vector-checks.html" class="external-link">vctrs::obj_is_vector()</a></code></p></li>
</ul><p>Atomic vector types <code>"logical"</code>, <code>"integer"</code>, <code>"double"</code>, <code>"complex"</code>,
<code>"character"</code>, and <code>"raw"</code> meet these criteria. As do many common vector
classes such as <code>POSIXct</code>, <code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">lubridate::interval</a></code>, or <code><a href="https://davisvaughan.github.io/ivs/reference/iv.html" class="external-link">ivs::iv</a></code>.</p>
<p>By default <code>.x</code> is an empty logical vector.</p></dd>


<dt id="arg--at">.at<a class="anchor" aria-label="anchor" href="#arg--at"></a></dt>
<dd><p><code>[logical / integerish / list]</code></p>
<p>Locations of elements in <code>.x</code> to conditionally format, supplied as a logical,
integer, or whole-numbered (e.g. <code>1.0</code>, <code>2.00</code>) numeric vector. <code>.at</code> may
also be a list of such vectors.</p>
<p>For example, <code>.at = c(TRUE, FALSE, TRUE)</code> corresponds to elements <code>1</code> and <code>3</code>
of <code>.x</code> (if they exist). As does <code>.at = c(1, 3)</code> and <code>.at = c(1.0, 3.0)</code>.</p>
<p>By default, <code>.at</code> is an empty logical vector.</p></dd>


<dt id="arg--f">.f<a class="anchor" aria-label="anchor" href="#arg--f"></a></dt>
<dd><p><code>[function / list]</code></p>
<p>Vectorized character manipulation functions used to format <code>.x</code>. <code>.f</code> may be:</p><ul><li><p>A named function, e.g. <a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::style_bold</a></p></li>
<li><p>An anonymous function, e.g. <code>\(words) gsub("hi", "hey", words)</code></p></li>
<li><p>A purrr-style lambda, e.g. <code>~ paste0(.h, "!")</code>, <code>~ "fizz"</code></p></li>
<li><p>A list of functions or lambdas, e.g. <code>list(~ cli::col_red(.x), toupper)</code></p></li>
</ul><p>Each formatter function in <code>.f</code> will receive a character vector (of variable length)
as it's only argument. A formatter must return a character vector the same
length as it's input or of length 1 (in which case the result is recycled to
the length of the input character).</p>
<p>ANSI string vectors (class <code>cli_ansi_string</code>) are also supported (see
<a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::ansi-styles</a> for details).</p>
<p>By default <code>.f</code> is the function <code>[cli::bg_br_yellow()]</code> which changes the
background color of it's input text to bright yellow. You can modify this
default by setting the <code>vlightr.default_formatter</code> in <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p><code>[formula / vlightr_highlighter]</code></p>
<p>For <code>templight_mult()</code> and <code>templight_case()</code>, a two sided formula with
locations on the left-hand-side and a formatter on the right-hand-side. This
argument replaces the <code>.at</code> and <code>.f</code> arguments of <code>templight()</code>. The ith dot
<code>..i</code> is roughly equivalent to <code>.at[[i]] ~ .f[[i]]</code>.</p>
<p>The left-hand-side of the formula may be:</p><ul><li><p>A logical vector, e.g. <code>c(TRUE, FALSE)</code>, <code>letters == "r"</code></p></li>
<li><p>Numeric indices, e.g. <code>c(1, 2, 3)</code>, <code>which(letters %in% c("q", "r"))</code></p></li>
</ul><p>The right-hand-side of the formula may be:</p><ul><li><p>A named function, e.g. <code><a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::style_hidden</a></code></p></li>
<li><p>An anonymous function, e.g. <code>\(x) tolower(trimws(x))</code></p></li>
<li><p>A purrr-style lambda expression, e.g. <code>paste(seq_along(.x), "is", .x)</code></p></li>
</ul><p>A temp-lighter, e.g. <code>templighter(c(1, 2, 3), color("blue"))</code>, may be
supplied instead of a formula, in which case the arguments <code>.at</code> and <code>.f</code>
of the temp-lighter are spliced into <code>...</code>.</p>
<p>In the case of <code>templight_case()</code>, elements of <code>.x</code> can be conditionally
formatted at most once, similar to the behavior of <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">dplyr::case_when()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of class <code>vlightr_templight</code>. For <code>templight_case()</code>, the a
vector of class <code>vlightr_templight/vlightr_highlight_case</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Vectors highlighted by <code>templight()</code> are said to be "temporarily"
conditionally formatted because the association between <code>.at</code> and
the elements of <code>.x</code> is likely to exist only temporarily.</p>
<p>For example, the code below creates a temp-lighted vector <code>minimum_tl</code>
which conditionally formats the minimum element of <code>x</code>.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>minimum_tl <span class="ot">&lt;-</span> <span class="fu">templight</span>(x, <span class="at">.at =</span> x <span class="sc">==</span> <span class="fu">min</span>(x), <span class="at">.f =</span> <span class="fu">wrap</span>(<span class="st">"&lt;"</span>, <span class="st">"&gt;"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">print</span>(minimum_tl) <span class="co"># 4 3 &lt;0&gt; 2 1</span></span></code></pre><p></p></div>
<p>When the vector <code>minimum_tl</code> is altered, by sorting it for example, the
conditionally formatted element is no longer the minimum value of <code>x</code>,
it is whatever happens to be the third element of the temp-lighted vector.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sort</span>(minimum_tl)) <span class="co"># 0 1 &lt;2&gt; 3 4</span></span></code></pre><p></p></div>
<p>This is in contrast to vectors created using <code><a href="highlight.html">highlight()</a></code>, which maintain
an association between specific elements of the data <code>x</code> and a conditional
format <code>.f</code>.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Highlight the minimum element of `x` (i.e. 0)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>minimum_hl <span class="ot">&lt;-</span> <span class="fu">highlight</span>(x, <span class="at">.t =</span> <span class="sc">~</span> .x <span class="sc">==</span> <span class="fu">min</span>(.x), <span class="at">.f =</span> <span class="fu">wrap</span>(<span class="st">"&lt;"</span>, <span class="st">"&gt;"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># The minimum element of `x` is still highlighted after sorting</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sort</span>(minimum_hl)) <span class="co"># &lt;0&gt; 1 2 3 4</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="highlight.html">highlight()</a></code> for conditionally formatting elements of a vector <code>.x</code>
for which a test <code>.t</code> returns <code>TRUE</code>.</p>
<p><code><a href="is_highlightable.html">is_highlightable()</a></code> for testing whether an object can be highlighted.</p>
<p><code><a href="un_highlight.html">un_highlight()</a></code> for converting a vector <code>highlight(.x)</code> back to <code>.x</code>.</p>
<p><code><a href="tests.html">tests()</a></code>, <code><a href="formatters.html">formatters()</a></code>, <code><a href="highlight_functions.html">highlight_functions()</a></code> for setting and
getting the values of <code>.t</code> (i.e. tests) and <code>.f</code> (i.e. formatters) of a
highlighted vector.</p>
<p><code><a href="stylers.html">color()</a></code> and friends for generating formatter functions for use in <code>.f</code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># TODO</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Sansom.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

