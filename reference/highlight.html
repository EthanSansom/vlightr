<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Conditionally format a vector — highlight • vlightr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Conditionally format a vector — highlight"><meta name="description" content="highlight() creates a vector with a conditional format()
and print() method. The function takes an input vector .x, a test
function .t, and a formatter function .f. When the result of
highlight(.x, .t, .f) is printed, elements of .x for which .t returns
TRUE are transformed by .f before they are printed.
.t and .f may be equal length lists of functions. Elements of .x for
which .t[[i]] returns true are transformed using .f[[i]]. Conditional
formats are applied to the highlighted vector in the order that they are
applied to .t and .f.
highlight_mult() and highlight_case() allow these pairs of functions to
be supplied as two-sided formulas .t ~ .f using dplyr::case_when()
style syntax.
hl() and highlight() are synonyms, as are hl_mult() and
highlight_mult(), hl_case() and highlight_case()."><meta property="og:description" content="highlight() creates a vector with a conditional format()
and print() method. The function takes an input vector .x, a test
function .t, and a formatter function .f. When the result of
highlight(.x, .t, .f) is printed, elements of .x for which .t returns
TRUE are transformed by .f before they are printed.
.t and .f may be equal length lists of functions. Elements of .x for
which .t[[i]] returns true are transformed using .f[[i]]. Conditional
formats are applied to the highlighted vector in the order that they are
applied to .t and .f.
highlight_mult() and highlight_case() allow these pairs of functions to
be supplied as two-sided formulas .t ~ .f using dplyr::case_when()
style syntax.
hl() and highlight() are synonyms, as are hl_mult() and
highlight_mult(), hl_case() and highlight_case()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vlightr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/vlightr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EthanSansom/vlightr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Conditionally format a vector</h1>
      <small class="dont-index">Source: <a href="https://github.com/EthanSansom/vlightr/blob/main/R/highlight.R" class="external-link"><code>R/highlight.R</code></a></small>
      <div class="d-none name"><code>highlight.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>highlight()</code> creates a vector with a conditional <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code>
and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method. The function takes an input vector <code>.x</code>, a test
function <code>.t</code>, and a formatter function <code>.f</code>. When the result of
<code>highlight(.x, .t, .f)</code> is printed, elements of <code>.x</code> for which <code>.t</code> returns
<code>TRUE</code> are transformed by <code>.f</code> before they are printed.</p>
<p><code>.t</code> and <code>.f</code> may be equal length lists of functions. Elements of <code>.x</code> for
which <code>.t[[i]]</code> returns true are transformed using <code>.f[[i]]</code>. Conditional
formats are applied to the highlighted vector in the order that they are
applied to <code>.t</code> and <code>.f</code>.</p>
<p><code>highlight_mult()</code> and <code>highlight_case()</code> allow these pairs of functions to
be supplied as two-sided formulas <code>.t ~ .f</code> using <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">dplyr::case_when()</a></code>
style syntax.</p>
<p><code>hl()</code> and <code>highlight()</code> are synonyms, as are <code>hl_mult()</code> and
<code>highlight_mult()</code>, <code>hl_case()</code> and <code>highlight_case()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">highlight</span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_test"</span><span class="op">)</span>,</span>
<span>  .f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_formatter"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hl</span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_test"</span><span class="op">)</span>,</span>
<span>  .f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"vlightr.default_formatter"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">highlight_mult</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hl_mult</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">highlight_case</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hl_case</span><span class="op">(</span><span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--x">.x<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p><code>[vector]</code></p>
<p>A vector to highlight. Conceptually, a vector is a collection of objects of
size 1.</p>
<p><code>.x</code> is considered a vector if:</p><ul><li><p><code>.x</code> is not a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></p></li>
<li><p><code>.x</code> is not a bare <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></p></li>
<li><p><code>.x</code> is otherwise a vector, as defined by <code><a href="https://vctrs.r-lib.org/reference/vector-checks.html" class="external-link">vctrs::obj_is_vector()</a></code></p></li>
</ul><p>Atomic vector types <code>"logical"</code>, <code>"integer"</code>, <code>"double"</code>, <code>"complex"</code>,
<code>"character"</code>, and <code>"raw"</code> meet these criteria. As do many common vector
classes such as <code>POSIXct</code>, <code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">lubridate::interval</a></code>, or <code><a href="https://davisvaughan.github.io/ivs/reference/iv.html" class="external-link">ivs::iv</a></code>.</p>
<p>By default <code>.x</code> is an empty logical vector.</p></dd>


<dt id="arg--t">.t<a class="anchor" aria-label="anchor" href="#arg--t"></a></dt>
<dd><p><code>[function / list]</code></p>
<p>Vectorized test functions that indicate which elements of <code>.x</code>
to conditionally format. <code>.t</code> may be:</p><ul><li><p>A named function, e.g. <code>is.na</code></p></li>
<li><p>An anonymous function, e.g. <code>\(x) 0 &lt;= x &amp; x &lt;= 1</code></p></li>
<li><p>A purrr-style lambda, e.g. <code>~ nchar(.x) &gt; 0</code>, <code>~ .h == 1</code>, <code>~ TRUE</code></p></li>
<li><p>A list of functions or lambdas, e.g. <code>list(~ .x &lt; mean(.x), is.finite)</code></p></li>
</ul><p>Each function in <code>.t</code> will receive <code>.x</code> as it's input and must return
a logical vector the same length as <code>.x</code> or of length 1 (in which case the
result will be recycled to the length of <code>.x</code>).</p>
<p>By default <code>.t</code> is the function <code><a href="false.html">false()</a></code> which returns <code>FALSE</code> for any
input. You can modify this default by setting the <code>vlightr.default_test</code>
in <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>.</p></dd>


<dt id="arg--f">.f<a class="anchor" aria-label="anchor" href="#arg--f"></a></dt>
<dd><p><code>[function / list]</code></p>
<p>Vectorized character manipulation functions used to format <code>.x</code>. <code>.f</code> may be:</p><ul><li><p>A named function, e.g. <a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::style_bold</a></p></li>
<li><p>An anonymous function, e.g. <code>\(words) gsub("hi", "hey", words)</code></p></li>
<li><p>A purrr-style lambda, e.g. <code>~ paste0(.h, "!")</code>, <code>~ "fizz"</code></p></li>
<li><p>A list of functions or lambdas, e.g. <code>list(~ cli::col_red(.x), toupper)</code></p></li>
</ul><p>Each formatter function in <code>.f</code> will receive a character vector (of variable length)
as it's only argument. A formatter must return a character vector the same
length as it's input or of length 1 (in which case the result is recycled to
the length of the input character).</p>
<p>ANSI string vectors (class <code>cli_ansi_string</code>) are also supported (see
<a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::ansi-styles</a> for details).</p>
<p>By default <code>.f</code> is the function <code>[cli::bg_br_yellow()]</code> which changes the
background color of it's input text to bright yellow. You can modify this
default by setting the <code>vlightr.default_formatter</code> in <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p><code>[formula / vlightr_highlighter]</code></p>
<p>For <code><a href="highlighter.html">highlighter_mult()</a></code> and <code><a href="highlighter.html">highlighter_case()</a></code>, a two sided formula with
a test on the left-hand-side and a formatter on the right-hand-side. This
argument replaces the <code>.t</code> and <code>.f</code> arguments of <code>highlight()</code>. The ith dot
<code>..i</code> is roughly equivalent to <code>.t[[i]] ~ .f[[i]]</code>.</p>
<p>The left-hand-side and right-hand-side of the formula may be:</p><ul><li><p>A named function, e.g. <code>is.numeric</code>, <a href="https://cli.r-lib.org/reference/ansi-styles.html" class="external-link">cli::style_bold</a></p></li>
<li><p>An anonymous function, e.g. <code>\(x) is.nan(x)</code>, <code>\(x) ifelse(x == "", "empty", x)</code></p></li>
<li><p>A purrr-style lambda expression, e.g. <code>paste0(.h, "?")</code>, <code>"fizzbuzz"</code></p></li>
</ul><p>Additionally, the left-hand-side of the formula may be a scalar atomic object,
supplied by name e.g. <code>1</code>, <code>NaN</code>, <code>"Hello"</code>. This is a shorthand for
a test of equality. For example:</p><ul><li><p><code>10</code> corresponds to <code>.x == 10</code>, <code>"Word"</code> to <code>.x == "Word"</code></p></li>
<li><p><code>NaN</code> corresponds to <code>is.nan(.x)</code></p></li>
<li><p><code>NA</code> corresponds to <code>is.na(.x)</code>, <code>NA_int_</code> to <code>is.na(.x) &amp; is.integer(.x)</code></p></li>
</ul><p>A one-sided formula (e.g. <code>~ tolower</code>) may also be supplied, in which case
every element of <code>.x</code> is formatted using the right-hand-side function
(e.g. <code>tolower</code>).</p>
<p>Finally, a highlighter, e.g. <code>highlighter(is.na, color("red"))</code>, may be
supplied instead of a formula. Every test (e.g. <code>.t</code>) and formatter
(e.g. <code>.f</code>) associated with the highlighter is inserted as a test
and formatter of the returned vector.</p>
<p>Examples of arguments to <code>...</code> include:</p><ul><li><p>Color <code>NA</code> values red: <code>is.na ~ color("red")</code></p></li>
<li><p>Add an exclamation mark: <code>toupper(.x) == .x ~ paste0(.x, "!")</code></p></li>
<li><p>Label the number 1 as "Yes": <code>1 ~ "Yes"</code></p></li>
<li><p>Color the background yellow by default: <code>~ cli::cli_bg_yellow(.x)</code></p></li>
</ul><p>In the case of <code>highlight_case()</code>, elements of <code>.x</code> can be conditionally
formatted at most once. Each element of <code>.x</code> is formatted using the formatter
corresponding to the first test which returns <code>TRUE</code> for that element.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of class <code>vlightr_highlight</code>. For <code>highlight_case()</code>, the a
vector of class <code>vlightr_highlight/vlightr_highlight_case</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code><a href="highlighter.html">highlighter_mult()</a></code> and <code>highlight_case()</code> formula syntax can conflict
with <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">dplyr::across()</a></code> in-lined formulas and other purrr-style-lambdas. In
particular, when the following is executed:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">across</span>(col, <span class="sc">~</span><span class="fu">highlight_mult</span>(.x, <span class="fu">is.na</span>(.x) <span class="sc">~</span> <span class="fu">color</span>(<span class="st">"red"</span>)))</span></code></pre><p></p></div>
<p>The formula <code>is.na(.x) ~ color("red")</code> will be replaced with
<code>is.na(y) ~ color("red")</code> by <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">dplyr::across()</a></code>. When the expression <code>is.na(col)</code>
is converted to a test function by <code>highlight_mult()</code>, the object <code>col</code> will
not exist in the environment of the test function, causing an error (or worse,
a difficult to diagnose bug) when the test function is called.</p>
<p>To avoid this behavior, vlightr allows the use of <code>.h</code> in it's
purrr-style-lambdas. Replacing <code>is.na(.x)</code> with <code>is.na(.h)</code>, as in the
following snippet, will work as expected:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a> dplyr<span class="sc">::</span><span class="fu">across</span>(y, <span class="sc">~</span><span class="fu">highlight_mult</span>(.x, <span class="fu">is.na</span>(.h) <span class="sc">~</span> <span class="fu">color</span>(<span class="st">"red"</span>)))</span></code></pre><p></p></div>
<p>All purrr-style-lambdas used by vlightr accept the symbols <code>.x</code>, <code>.h</code>, and <code>.</code>
as aliases for their first argument.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="templight.html">templight()</a></code> for conditionally formatting elements of a vector <code>.x</code>
by location. Replaces the test <code>.t</code> with a vector of positions <code>.at</code>.</p>
<p><code><a href="is_highlightable.html">is_highlightable()</a></code> for testing whether an object can be highlighted.</p>
<p><code><a href="un_highlight.html">un_highlight()</a></code> for converting a vector <code>highlight(.x)</code> back to <code>.x</code>.</p>
<p><code><a href="tests.html">tests()</a></code>, <code><a href="formatters.html">formatters()</a></code>, <code><a href="highlight_functions.html">highlight_functions()</a></code> for setting and
getting the values of <code>.t</code> (i.e. tests) and <code>.f</code> (i.e. formatters) of a
highlighted vector.</p>
<p><code><a href="stylers.html">color()</a></code> and friends for generating formatter functions for use in <code>.f</code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Emphasize NA values when `x_hl` is printed</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="cn">NA</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x_hl</span> <span class="op">&lt;-</span> <span class="fu">highlight</span><span class="op">(</span><span class="va">x</span>, <span class="va">is.na</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"["</span>, <span class="va">.x</span>, <span class="st">"]"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1  0 NA  1  0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x_hl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;double&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1      0      [ NA ] 1      0     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Track the maximum of `values`</span></span></span>
<span class="r-in"><span><span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">highlight</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">3</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>, <span class="fu"><a href="stylers.html">wrap</a></span><span class="op">(</span><span class="st">"["</span>, <span class="st">"]"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;double&gt;[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1   5   [7] 3  </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;double&gt;[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1   3   5   [7]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">hl</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="va">values</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;double&gt;[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] [-1] -5   -7   -3  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add labels to an indicator variable</span></span></span>
<span class="r-in"><span><span class="va">indicator</span> <span class="op">&lt;-</span> <span class="fu">highlight_mult</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"No"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">is.na</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">color</a></span><span class="op">(</span><span class="st">"red"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="op">!</span><span class="op">(</span><span class="va">.x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"?"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">indicator</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;double&gt;[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 [No]  1 [Yes] <span style="color: #BB0000;">NA</span>      5 [?]  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simplify using `dplyr::case_when()` style case matching.</span></span></span>
<span class="r-in"><span><span class="co"># Elements are conditionally formatted using the first case</span></span></span>
<span class="r-in"><span><span class="co"># where the left-hand-side returns `TRUE`.</span></span></span>
<span class="r-in"><span><span class="va">indicator</span> <span class="op">&lt;-</span> <span class="fu">highlight_case</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"No"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">is.na</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">color</a></span><span class="op">(</span><span class="st">"red"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">true</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"?"</span><span class="op">)</span> <span class="co"># `true()` is a function which returns `TRUE`</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">indicator</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight_case&lt;double&gt;[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 [No]  1 [Yes] <span style="color: #BB0000;">NA</span>      5 [?]  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a `highlighter()` to add the formatting of `indicator`</span></span></span>
<span class="r-in"><span><span class="co"># to other vectors.</span></span></span>
<span class="r-in"><span><span class="va">indicator_highlighter</span> <span class="op">&lt;-</span> <span class="fu"><a href="as_highlighter.html">as_highlighter</a></span><span class="op">(</span><span class="va">indicator</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">indicator_highlighter</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="op">-</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight_case&lt;double&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 [Yes] 0 [No]  1 [Yes] <span style="color: #BB0000;">NA</span>      -9 [?] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A highlighter can be supplied to `highlight_mult()` or</span></span></span>
<span class="r-in"><span><span class="co"># `highlight_case()`. This is an easy way to append new</span></span></span>
<span class="r-in"><span><span class="co"># options to an existing highlighter.</span></span></span>
<span class="r-in"><span><span class="fu">highlight_case</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="cn">NA</span>, <span class="op">-</span><span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">label</a></span><span class="op">(</span><span class="st">"Maybe"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">indicator_highlighter</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight_case&lt;double&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 [Yes]   2 [Maybe] 0 [No]    <span style="color: #BB0000;">NA</span>        -9 [?]   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply multiple formats to the same element</span></span></span>
<span class="r-in"><span><span class="fu">highlight_mult</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span></span>
<span class="r-in"><span>  <span class="va">.x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">wrap</a></span><span class="op">(</span><span class="st">"&lt;"</span>, <span class="st">"&gt;"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">.x</span> <span class="op">&gt;=</span> <span class="fl">3</span> <span class="op">~</span> <span class="fu"><a href="stylers.html">wrap</a></span><span class="op">(</span><span class="st">"["</span>, <span class="st">"]"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;integer&gt;[6]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1     &lt;2&gt;   [3]   [&lt;4&gt;] [5]   [&lt;6&gt;]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply a formatter to every element of `.x` by</span></span></span>
<span class="r-in"><span><span class="co"># supplying a one-sided formula.</span></span></span>
<span class="r-in"><span><span class="va">upper_letters</span> <span class="op">&lt;-</span> <span class="fu">highlight_mult</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="op">~</span> <span class="va">toupper</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">upper_letters</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;character&gt;[10]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that highlighting does not alter the underlying data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="un_highlight.html">un_highlight</a></span><span class="op">(</span><span class="va">upper_letters</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A one-sided formula supplied to `highlight_case()` will</span></span></span>
<span class="r-in"><span><span class="co"># format all elements, even if they have already been formatted,</span></span></span>
<span class="r-in"><span><span class="co"># over-riding the default matching behavior.</span></span></span>
<span class="r-in"><span><span class="fu">highlight_case</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fl">0</span> <span class="op">~</span> <span class="st">"No"</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span></span>
<span class="r-in"><span>  <span class="op">~</span> <span class="va">toupper</span> <span class="co"># `true ~ toupper` wouldn't format any elements</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight_case&lt;double&gt;[3]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] YES YES NO </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By default no formatting is applied to a highlighted vector.</span></span></span>
<span class="r-in"><span><span class="fu">highlight</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="co"># No conditional formatting</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;integer&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The default formatter `.f` colors the background of the</span></span></span>
<span class="r-in"><span><span class="co"># formatted vector yellow. If you are reading this is in</span></span></span>
<span class="r-in"><span><span class="co"># an environment which doesn't support ANSI coloring, you</span></span></span>
<span class="r-in"><span><span class="co"># may not see the yellow background.</span></span></span>
<span class="r-in"><span><span class="fu">highlight</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># Yellow background</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;integer&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 <span style="background-color: #FFFF55;">4</span> <span style="background-color: #FFFF55;">5</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change the default test or formatter using `options()`</span></span></span>
<span class="r-in"><span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Save previous options</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>vlightr.default_formatter <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"{"</span>, <span class="va">x</span>, <span class="st">"}"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">highlight</span><span class="op">(</span><span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;integer&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] { -2 } { -1 } 0      1      2     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>vlightr.default_test <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">highlight</span><span class="op">(</span><span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;highlight&lt;integer&gt;[5]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -2    -1    0     { 1 } { 2 }</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">opts</span><span class="op">)</span> <span class="co"># Reset previous options</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Sansom.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

