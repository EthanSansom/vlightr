---
output: github_document
always_allow_html: yes
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE, cache = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  cache = FALSE,
  asciicast_at = "end",
  asciicast_theme = if (Sys.getenv("IN_PKGDOWN") == "true") "pkgdown" else "readme"
)
asciicast::init_knitr_engine(
  startup = quote({
    library(cli)
    library(vlightr)
    options(cli.num_colors = cli::truecolor)
    set.seed(1)
  }),
  echo = TRUE,
  echo_input = FALSE
)
```

# vlightr

<!-- badges: start -->

<!-- badges: end -->

vlightr is a package for

## Installation

You can install the development version of vlightr from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("EthanSansom/vlightr")
```

## Features

```{r}
library(vlightr)
```

Conditionally format vector elements.

```{asciicast red-nas}
x <- c(1L, 0L, NA, 1L, 0L)
x_hl <- vlightr::highlight(x, is.na, vlightr::colour("red"))
x_hl
```

Highlighted vectors play well with other highlighted vectors of the same type. The shorthand `hl()` is useful for quick highlighting.

```{asciicast operation}
x_hl + vlightr::hl(10L)
```

Coercion works as well.

```{asciicast coerce}
c(x_hl, vlightr::hl(c(-1.5, NA)))
```

Apply multiple conditional formats.

```{asciicast multiple-formats}
dummies <- vlightr::highlight(
  x = x,
  conditions = list(
    is.na, 
    ~ .x == 1, 
    ~ .x == 0
  ),
  formatters = list(
    vlightr::colour("red"), 
    ~ paste(.x, "[Yes]"),
    ~ paste(.x, "[No]")
  )
)
dummies
```

The underlying data is unchanged.

```{asciicast unhighlight}
vlightr::un_highlight(dummies)
```

Use `dplyr::case_when()` style syntax.

```{asciicast case-syntax}
bad_words <- c("darn", "gosh")
affirmations <- c("good job", "way-to-go")

vlightr::highlight_case(
  x = c("hey", "good job", "but", "darn", "please", "don't", "say", "gosh"),
  .x %in% bad_words ~ \(x) strrep("X", nchar(x)),
  .x %in% affirmations ~ \(x) toupper(x),
  TRUE ~ cli::style_italic
)
```

Highlight's are generic, meaning many S3 and S4 vector classes are supported.

```{asciicast generic}
library(lubridate, warn.conflicts = FALSE)

today <- ymd("2020-01-01")
meeting_times <- interval(
  today + hours(c(9, 11, 16)), 
  today + hours(c(10, 13, 17))
)
lunch_break <- interval(today + hours(12), today + hours(13))
is_during_lunch <- function(x) int_overlaps(x, lunch_break)

vlightr::highlight(meeting_times, is_during_lunch, cli::bg_red)
```
